<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>마이페이지</title>
<link href="/css/myPageStyle.css" rel="stylesheet">
  <link href="/css/mainStyle.css" rel="stylesheet">
</head>
<body>

  <th:block th:replace="/fragment::header"></th:block>
    <div id="mypage">
    

  <div class="mypage">
      <table>

        <tr>
          <th>회원번호</th>
          <td th:text="${session.user.accounts_idx}"></td>
        </tr>
        <tr>
          <th>아이디</th>
          <td th:text="${session.user.userid}"></td>
        </tr>
        <tr>
          <th>닉네임</th>
          <td th:text="${session.user.nick}"></td>
        </tr>
        <tr>
          <th>이메일</th>
          <td th:text="${session.user.email}"></td>
        </tr>
        <tr>
          <th>생년월일</th>
          <td th:text="${session.user.birth}"></td>
        </tr>
        <tr>
                <th>프로필 사진</th>
                <td>
                    <!-- 이미지 업로드 폼 -->
                    <form method="POST" enctype="multipart/form-data" th:action="@{/member/uploadProfile}">
                        <input type="file" name="profileImage" accept="image/*" />
                        <button type="submit">업로드</button>
                    </form>
                    <!-- 업로드된 프로필 사진 표시 -->
                    <div th:if="${session.user.profile}">
                        <img th:src="@{'/image/' + ${session.user.profile}}" alt="Profile Image" style="width: 150px; height: 150px;" />

                    </div>
                </td>
            </tr>
        </table>

      

    <button>수정</button>
    <button>탈퇴</button>
  </div>


  <script th:inline="javascript">
    let btns = document.querySelectorAll('button');
    
    // 수정 버튼
    btns[0].onclick = () => {
      location.href = '/member/update';
    };
    
    // 삭제 버튼
    btns[1].onclick = () => {
      // console.log([[${session.user.accounts_idx}]]);
      location.href = '/member/delete/[[${session.user.accounts_idx}]]';
    };
  </script>
  
    </div>


  <th:block th:replace="/fragment::footer"></th:block>
</body>
</html>